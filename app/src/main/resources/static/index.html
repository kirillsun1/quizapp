<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js" integrity="sha512-iKDtgDyTHjAitUDdLljGhenhPwrbBfqTKWO1mkhSFH3A7blITC9MhYon6SjnMhp4o0rADGw9yAC6EW4t5a4K3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
test

<button id="create">Create</button>

<button id="connect">Connect and subscribe</button>

<div>Rooms: <p id="rooms"></p></div>

<script>
    document.getElementById("create").addEventListener("click", ev => {
        const url = `${window.location.origin}/api/rooms`;
        console.log(url);
        fetch(url, {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({})
        })
            .then(e => console.log("ok", e))
            .catch(e => console.error("not ok", e));
    });

    const roomsList = document.getElementById("rooms");

    document.getElementById("connect").addEventListener("click", ev => {
        const socket = new SockJS('/ws-endpoint');
        stompClient = Stomp.over(socket);
        stompClient.connect({}, function (frame) {
            console.log('Connected: ' + frame);
            stompClient.subscribe('/topic/rooms', function (val) {
                roomsList.innerHTML = JSON.stringify(val.body);
            });
        });
    });
</script>
</body>
</html>